{% load static %}
<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
        <title> Scanning your area | KRopne. </title>
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
        <script src = {% static 'js/getUserLocation.js' %} ></script>
    </head>
    <body>
        <nav class="navbar navbar-light">
            <div class = 'col-md-3'>

            </div>
            <div class = 'col-md-6'>

                <a class="navbar-brand" href="#">
                    <img src="https://cdn1.iconfinder.com/data/icons/andriod-app-logo/32/icon_k-512.png" width="30" height="30" alt="">
                    &nbsp; &nbsp; के रोप्ने ?
                </a>
            </div>
            <div class = 'col-md-3'>
                
            </div>
        </nav>
        <br />
        <div class = 'row' class = 'pane'>
            <div class = 'col-md-3'>

            </div>
            <div class = 'col-md-6'>
                <table>
                    <tr>
                        <td> Your Location: </td>
                        <td> {{ data.location }} </td>
                    </tr>
                
                    <tr>
                        <td> Weather: </td>
                        <td> {{ data.descriptionOfWeather }} </td>
                    </tr>
                
                    <tr>
                        <td> Wind: </td>
                        <td> {{ data.wind }} </td>
                    </tr>
                
                    <tr>
                        <td> humidity: </td>
                        <td> {{ data.humidity }} </td>
                    </tr>
                
                    <tr>
                        <td> Current Temperature: </td>
                        <td> {{ data.temperature }} </td>
                    </tr>
                </table>

                <br />
                <button type = "button" id = 'searchRouteButton' class = "btn btn-primary">
                    Search for crops
                </button>
            </div>
            <div class = 'col-md-3'>

            </div>
        </div>
        <style>
            .pane{
                margin: 200px auto;
                text-align: center;
            }
            table tr td{
                padding: 16px;
                margin: 10px;
            }
            table tr td:nth-child(1){
                font-weight: bold;
                color: black;
                background: #f1f1f1;
            }
            table tr td:nth-child(2){
                padding-left: 50px;
            }
        </style>
        <script>
            var searchRouteButton = document.querySelector("#searchRouteButton");
            searchRouteButton.addEventListener("click", routeSearchPage);
            var humidity = {{ data.humidity }};
            var temperature = {{ data.temperature }};

            function routeSearchPage(){
                // First get the window location.
                var loc = window.location.search
                all = loc.split('=')
                alt = all[all.length-1]

                // Generate a new URL for the second page.
                var newLocation = "http://" + window.location.host + "/cropslist?altitude=" + String(alt) + "&temperature=" + String(temperature) + "&humidity=" + String(humidity);
                // Redirect.
                window.location = newLocation
            }
        </script>
    </body>
</html>